@startuml
'https://plantuml.com/class-diagram
skinparam classAttributeIconSize 0
skinparam groupInheritance 3
hide empty methods
hide empty members

class Client {
    {static} + main(args: String[]): void
    - mails: Mail[]
    + Client(victimFile: String, messageFile: String, groupCount: int)
    + execute(): void
}

class Handler {
    - socket: Socket
    - worker: Worker
    Handler(socket: Socket, worker: Worker)
    + run() : void
}

class Worker {
    Worker(Mail mail)
    + work(message: String) : String
    - identity(): String
    - mailHeader(): String
    - mailBody(): String
}

enum SmtpCommand {
    EHLO
    MAIL
    RCPT
    DATA
    QUIT
}

enum SmtpStatus {
    220
    221
    250
    354
}

class Parser {
    - groups: Mail[]
    Parser(victimFile: String, messageFile: String, groupCount: int)
    - selectMessage(messages: String[]): String
    - selectCandidate(candidates: String[]): String
    - selectVictims(candidates: String[]): String[]
    + getGroups(): Mail[]
    {static} - parseFile(String path) : String[]
}

class Mail {
    - sender: String
    - receivers: String[]
    - message: String
    Mail(sender: String, receivers: String[], message: String)
    + getSender(): String
    + getReceivers(): String[]
    + getMessage(): String
}

note right of Mail: Java Record


interface Runnable

Client ..> Handler
Client ..> Parser
Handler .down.> Worker
Runnable .right.|> Handler
Parser ..> Mail
Worker "*" -right-> "1" Mail : "Message >"
Worker "*" -left-> "1" SmtpCommand : "State >"
Worker .down.> SmtpStatus
@enduml